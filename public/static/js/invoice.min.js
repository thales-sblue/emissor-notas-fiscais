const{createApp:createApp,reactive:reactive,computed:computed,onMounted:onMounted}=Vue;createApp({setup(){const e=reactive({client_id:"",notes:"",items:[]}),t=reactive([]),o=reactive([]),i=computed((()=>e.items.reduce(((e,t)=>{const i=o.find((e=>e.id===t.product_id));return i?e+i.price*t.quantity:e}),0)));return onMounted((async()=>{const[e,i]=await Promise.all([fetch("/clients/index"),fetch("/products/index")]),a=await e.json(),c=await i.json();t.push(...a),o.push(...c)})),{invoice:e,clients:t,products:o,total:i,addItem:()=>{e.items.push({product_id:"",quantity:1})},removeItem:t=>{e.items.splice(t,1)},createInvoice:async()=>{const t={...e,total:i.value},o=await fetch("/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(o.ok)alert("Nota fiscal criada com sucesso!"),window.location.reload();else{const e=await o.json();alert(e.details||"Erro ao criar nota")}}}}}).mount("#app");